#Анализ текущего решения:

Текущее монолитное решение не соответствует целям компании, так как является сложно масштабируемым (в будущем планируется увеличение количества поддерживаемых систем, а так же реализация возможности их дальнейшего расширения). Также, текущее решение поддерживает только синхронные вызовы, что, при реализации дальнейших целей, будет создавать задержки, проблемы с производительностью и неравномерному распределению нагрузки. Кроме того, узким местом является необходимость остановки всего решения для развертывания приложения, что необходимо исправить в рамках дальнейшей разработки.

#В связи с этим предлагается:

Выделить в приложении следующие домены, соответствующие бизнес-задачам(в рамках принципов DDD):
1. User Service - сервис управления пользователями и устройствами пользователей
2. Telemetry Service - сервис обработки и хранения данных, получаемых с датчиков
3. Heating system service - сервис управления системой отопления
4. Light management system service - сервис управления системой освещения
5. Gates system service - сервис управления автоматическими воротами
6. Survelliance system service - сервис управления видеонаблюдением

Также, предлагается добавить асинхронное взаимодействие сервисам (например, с использованием Kafka), а также разработать API Gateway для распределения запросов и управления балансировкой нагрузки.

#Пути к диаграммам C4

/diagrams - директория, содержащая диаграммы
/diagrams/ERD.puml - ER-diagram 
/diagrams/context/Context.puml - диаграмма контекста
/diagrams/container/Container_AsIs.puml - AsIs диаграмма контейнеров
/diagrams/container/Container_ToBe.puml - ToBe диаграмма контейнеров
/diagrams/component/Component_AsIs.puml - AsIs диаграмма компонентов
/diagrams/component/Component_..._ToBe.puml - ToBe диаграммы компонентов
/diagrams/code - диаграммы кода


#api
Исходя из целей, преедлагается разработать следующие эндпоинты (подробное описание api находится в файле api.yaml):

User
GET /devices - Возвращает список устройств пользователя
POST /devices - Добавляет новое устройство пользователя
DELETE /devices/{id} - Удалить устройство
GET /devices/{id} - Получить устройство по Id
PATCH /devices/{id} - Обновить настройки устройства

Telemetry
GET /telemetry - Возвращает данные по всем датчикам
GET /telemtry/{id} - Получить данные датчика по Id
GET /telemetry/findByDate - Возвращает данные датчиков за конкретную дату

Heating System
POST /heating - Возвращает статус системы отпления (ыкл/выкл)
GET /heating - Отправляет запрос на включение/отключение системы отопления
PUT /heating - Устанавливает значение температуры

Light Mangement System
POST /light - Возвращает статус системы освещения
GET /light - Отправляет запрос на включение/отключение системы освещения
PUT /light/{request} - Устанавливает параметры системы освещения

Gates System
POST /gates - Отправляет запрос на открытие/закрытие ворот
GET /gates - Возвращает статус ворот (открыты/закрыты)

Survelliance System
POST /survelliance - Отправляет запрос на включение/отключение системы видеонаблюдения
GET /survelliance - Возвращает статус системы видеонаблюдения
POST /survelliance/{moduleId} - Отправляет запрос на включение/отключение камеры по Id
GET /survelliance/{moduleId} - Возвращает статус камеры по Id